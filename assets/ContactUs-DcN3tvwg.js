const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Map-Dp8JmkDx.js","assets/index-CJtwsFXR.js","assets/index-CPQ2kE5u.css","assets/Map-CIGW-MKW.css"])))=>i.map(i=>d[i]);
import{r as i,j as s,R as h,_ as f,S as y,u as g,U as j,C as I,c as S}from"./index-CJtwsFXR.js";import{u as w,C as b}from"./index.esm-D5aTxCi3.js";import{u as C,C as M,o as N,c as v,a as c}from"./index.esm-CoaRfOjh.js";import{S as E}from"./Sms-DEQBq_c2.js";import{M as z}from"./Message-DObteqCJ.js";const _=h.lazy(()=>f(()=>import("./Map-Dp8JmkDx.js"),__vite__mapDeps([0,1,2,3]))),k=()=>{const[n,r]=i.useState(!1);return i.useEffect(()=>{r(!0)},[]),n?s.jsx(i.Suspense,{fallback:s.jsx("div",{children:"Loading map..."}),children:s.jsx(_,{})}):null},J=[{name:"userName",label:"نام و نام خانوادگی",type:"text",Icon:j},{name:"email",label:"ایمیل",type:"email",Icon:E},{name:"message",label:"پیام",type:"text",Icon:z}],O=v({userName:c().required("نام و نام خانوادگی الزامی است"),email:c().required("ایمیل الزامی است").email("ایمیل معتبر نیست"),message:c().required("پیام الزامی است")}),D=()=>{const n=i.useContext(y),{control:r,handleSubmit:u,formState:{errors:p}}=w({resolver:N(O),mode:"onSubmit"}),l=C({mutationFn:async e=>{const t=await fetch("https://qaqpavkbmcujmzddezua.supabase.co/rest/v1/contactus",{method:"POST",headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFhcXBhdmtibWN1am16ZGRlenVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1ODQwMTAsImV4cCI6MjA2NzE2MDAxMH0.RDrMXyFXS3Ey1dnqLUkQMdGXLvIijS0Wrfs3Z1Gl8l0"},body:JSON.stringify(e)});let a=null;const o=t.headers.get("content-type");if(o&&o.includes("application/json")&&(a=await t.json()),!t.ok)throw new Error(a?.msg||"خطا در ارسال پیام");return a},onSuccess:(e,t)=>{n?.showDialog(`${t.userName} عزیز، پیامت با موفقیت ثبت شد`,"success")},onError:e=>{console.log(e),n?.showDialog(e.message,"error")}}),d=e=>{l.mutate(e)},m=g("(min-width: 1060px)");return s.jsxs("div",{className:`${m?"w-[1037px] gap-y-10":"w-full sm:w-[574px] px-5 gap-y-5"} items-center flex flex-col`,children:[s.jsx("h1",{className:"ResponsiveFontSize w-full",children:"تماس با ما"}),s.jsxs("div",{className:`w-full ${m?"flex-row":"flex-col"} items-center flex justify-center gap-y-10 gap-x-32`,children:[s.jsxs("form",{noValidate:!0,onSubmit:u(d),className:`w-full space-y-5 ${l.isPending&&"pointer-events-none opacity-50"}`,children:[J.map(({name:e,label:t,type:a,Icon:o})=>s.jsx(b,{name:e,control:r,render:({field:x})=>s.jsx(M,{...x,label:t,type:a,Icon:o,error:p[e]?.message,width:"100%",Element:e==="message"?"textarea":"input",height:`${e==="message"?"150px":"56px"}`})},e)),s.jsx(I,{type:"submit",variant:"filled",width:"w-full",height:"h-14",rounded:"rounded-xl",element:"button",ratio:"aspect-auto",ariaLabel:"ارسال",children:l.isPending?s.jsx(S,{className:"size-7 fill-white"}):"ارسال"})]}),s.jsx(k,{})]})]})};export{D as default};
